<!DOCTYPE html>
<html lang="fr">
<head>
    <title>
        
Installing in Production

    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/static/css/icons.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bulma.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bookwyrm.css?v076">

    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bookwyrm Documentation">
    <meta name="og:title" content="Bookwyrm Documentation">
    <meta name="twitter:description" content="Documentation for using and contributing to BookWyrm">
    <meta name="og:description" content="Documentation for using and contributing to BookWyrm">

    <meta name="twitter:image" content="">
    <meta name="og:image" content="">
    <meta name="twitter:image:alt" content="BookWyrm Logo">

    <meta charset="UTF-8">
</head>
<body>
<nav class="navbar container is-max-desktop" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://joinbookwyrm.com/">
            <img class="image logo" src="/static/images/logo-small.png" alt="Go back to the homepage">
        </a>
        <a href="/" class="navbar-item has-text-link has-text-weight-bold">
            Documentation
        </a>
        <a role="button" class="navbar-burger" data-target="main-nav" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" id="main-nav">
        <div class="navbar-start">
            <a href="https://joinbookwyrm.com/fr/instances" class="navbar-item">
                Rejoindre
            </a>
            <a href="https://joinbookwyrm.com/fr/get-involved" class="navbar-item">
                S'impliquer dans le projet
            </a>
            <a href="https://www.patreon.com/bookwyrm" class="navbar-item">
                Soutenir
            </a>
            <a href="https://github.com/bookwyrm-social/bookwyrm" class="navbar-item">
                Code
            </a>
        </div>
    </div>
</nav>


<div class="columns">
    <nav class="menu column is-one-quarter is-hidden-touch pl-6 mt-4" id="menu">
        <h2 class="menu-label">Language & Version</a></h2>
        <div class="select">
            <select aria-label="Select a language" id="language_selection">
                
                <option value="" >English (US)</option>
                
                <option value="de/" >Deutsch</option>
                
                <option value="fr/" selected>Français</option>
                
                <option value="pl/" >Polski</option>
                
                <option value="pt-br/" >Português do Brasil</option>
                
                <option value="ro/" >Română</option>
                
          </select>
        </div>
        <div class="select">
            <select aria-label="Previous versions" id="version_selection">
                
                <option value="development" >development</option>
                
                <option value="v0.7.5" selected>v0.7.5</option>
                
                <option value="v0.8.0" >v0.8.0</option>
                
            </select>
        </div>
        
        <h2 class="menu-label">Using BookWyrm</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/v0.7.5/fr/main-menu.html" class="has-background-inherit" >Main Menu & Timelines</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/shelves.html" class="has-background-inherit" >Shelves & Reading Status</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/adding-books.html" class="has-background-inherit" >Ajout de livres</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/settings.html" class="has-background-inherit" >Settings and Profile</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/posting-statuses.html" class="has-background-inherit" >Posting Statuses</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/lists.html" class="has-background-inherit" >Lists</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/privacy-controls.html" class="has-background-inherit" >Privacy Controls</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/groups.html" class="has-background-inherit" >Groups</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/rss-feeds.html" class="has-background-inherit" >RSS Feeds</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/user-migration.html" class="has-background-inherit" >User Migration and Aliases</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Running BookWyrm</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/v0.7.5/fr/moderation.html" class="has-background-inherit" >Modération</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/reverse-proxy.html" class="has-background-inherit" ></a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/install-prod.html" class="has-background-inherit" class="is-active">Installing in Production</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/install-prod-dockerless.html" class="has-background-inherit" >Installation sans Docker</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/updating.html" class="has-background-inherit" >Mise à jour de votre instance</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/monitoring-queue.html" class="has-background-inherit" >Suivi de la file d'attente</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/external-storage.html" class="has-background-inherit" >External Storage</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/optional_features.html" class="has-background-inherit" >Fonctionnalités optionnelles</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/cli.html" class="has-background-inherit" >Outils en ligne de commande</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Contributing</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/v0.7.5/fr/contributing.html" class="has-background-inherit" >Comment contribuer</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/translation.html" class="has-background-inherit" >Translations</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/documentation.html" class="has-background-inherit" >Documentation</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/style_guide.html" class="has-background-inherit" >Style Guide</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/install-dev.html" class="has-background-inherit" >Developer Environment</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/debug_toolbar.html" class="has-background-inherit" >Django Debug Toolbar</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Codebase</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/v0.7.5/fr/activitypub.html" class="has-background-inherit" >ActivityPub</a>
            </li>
            
            <li>
                <a href="/v0.7.5/fr/permissions.html" class="has-background-inherit" >Permissions</a>
            </li>
            
        </ul>
        
    </nav>

    <div class="column">
        <div class="container is-max-desktop">
            <section class="section">
                <header class="content block column is-offset-one-quarter pl-2">
                    
<h1 class="title is-1">Installing in Production</h1>

                </header>
                
<section class="block content">
    <p>Ce projet est encore jeune et n'est pas, pour le moment, très stable, faites preuve de prudence lors de son utilisation en production.</p>
<h2 id="configuration-du-serveur"><a class="headerlink" href="#configuration-du-serveur">Configuration du serveur</a></h2>
<ul>
<li>Obtenez un nom de domaine et configurez le DNS pour votre serveur. Vous devez faire pointer les serveurs de noms de domaine de votre fournisseur DNS vers le serveur où vous allez héberger BookWyrm. Voici les instructions pour <a href="https://www.digitalocean.com/community/tutorials/how-to-point-to-digitalocean-nameservers-from-common-domain-registrars">DigitalOcean</a></li>
<li>Configurez votre serveur avec un pare-feu approprié pour les applications web (cette page de documentation est testée avec Ubuntu 20.04). Voici les instructions pour <a href="https://www.digitalocean.com/community/tutorials/initial-server-setup-with-ubuntu-20-04">DigitalOcean</a></li>
<li>Configurez un service mail (comme <a href="https://documentation.mailgun.com/en/latest/quickstart.html">Mailgun</a>) et les paramètres SMTP/DNS appropriés. Utilisez la documentation du service pour configurer vos DNS</li>
<li><a href="https://docs.docker.com/compose/install/">Installez Docker et docker-compose</a></li>
</ul>
<h2 id="installation-et-configuration-de-bookwyrm"><a class="headerlink" href="#installation-et-configuration-de-bookwyrm">Installation et configuration de BookWyrm</a></h2>
<p>There are several repos in the BookWyrm org, including documentation, a static landing page, and the actual Bookwyrm code. To run BookWyrm, you want the actual app code which is in <a href="https://github.com/bookwyrm-social/bookwyrm">bookwyrm-social/bookwyrm</a>.</p>
<p>La branche <code>production</code> de BookWyrm contient nombre d'outils qui ne sont pas sur la branche <code>main</code> prévus pour fonctionner en production. Par exemple des changements dans <code>docker-compose</code> pour mettre à jour les commandes par défaut ou la configuration des conteneurs et des changements individuels à la configuration des conteneurs pour activer des choses comme SSL ou les sauvegardes régulières.</p>
<p>Instructions pour lancer BookWyrm en production :</p>
<ul>
<li>Récupérez le code de l'application : <code>git clone git@github.com:bookwyrm-social/bookwyrm.git</code></li>
<li>Basculez sur la branche <code>production</code> : <code>git checkout production</code></li>
<li>Créez votre fichier de variables d'environnement, <code>cp .env.example .env</code>, et mettez à jour les valeurs suivantes :<ul>
<li><code>DOMAIN</code> | Votre nom domaine</li>
<li><code>EMAIL</code> | L'adresse mail qui sera utilisée pour la vérification certbot</li>
<li><code>FLOWER_USER</code> | Votre propre nom d'utilisateur·ice pour accéder à la surveillance des files d'attente Flower</li>
<li><code>EMAIL_HOST_USER</code> | L'adresse "From" que l'application utilisera pour l'envoi de mail</li>
<li><code>EMAIL_HOST_PASSWORD</code> | Le mot de passe fourni par votre service mail</li>
</ul>
</li>
<li>Initialize secrets by running <code>./bw-dev create_secrets</code> or manually update following in <code>.env</code>:<ul>
<li><code>SECRET_KEY</code> | Une chaîne de caractères, difficile à deviner</li>
<li><code>POSTGRES_PASSWORD</code> | Un mot de passe sécurisé pour la base de données</li>
<li><code>REDIS_ACTIVITY_PASSWORD</code> | Un mot de passe sécurisé pour le Redis d'activités</li>
<li><code>REDIS_BROKER_PASSWORD</code> | Un mot de passe sécurisé pour le Redis de files d'attente</li>
<li><code>FLOWER_PASSWORD</code> | Votre propre mot de passe sécurisé pour accéder à la surveillance des files d'attente Flower</li>
<li>Si vous faites fonctionner un autre serveur web sur votre machine, vous devez suivre les <a href="/reverse-proxy.html">instructions de proxy inverse</a></li>
</ul>
</li>
<li>Check that you have <a href="/environment.html#required-environment-settings">all the required settings configured</a> before proceeding further</li>
<li>Setup ssl certificate via letsencrypt by running <code>./bw-dev init_ssl</code></li>
<li>Initialisez la base de données avec <code>./bw-dev migrate</code></li>
<li>Run the application with <code>docker-compose up --build</code>, and make sure all the images build successfully<ul>
<li>Si vous faites fonctionner d'autres services sur votre machine, vous pourriez rencontrer des erreurs avec certains services tentant de s'attribuer un port. Consultez le <a href="#port_conflicts">guide de dépannage</a> pour avoir des conseils de résolution à ce sujet.</li>
</ul>
</li>
<li>Une fois que les images docker sont construites avec succès, arrêtez le processus avec <code>CTRL-C</code></li>
<li>Si vous souhaitez utiliser un stockage externe pour les fichiers statiques et médias (comme un service compatible S3), <a href="/external-storage.html">suivez les instructions</a> jusqu'à ce que celles-ci indiquent de revenir ici</li>
<li>Initialisez l'application avec <code>./bw-dev setup</code> et copiez le code admin afin de l'utiliser pour créer votre compte admin.<ul>
<li>La sortie de <code>./bw-dev setup</code> devrait se terminer par votre code admin. Vous pouvez récupérer votre code à tout moment en lançant <code>./bw-dev admin_code</code> depuis la ligne de commande. Voici un exemple du résultat :</li>
</ul>
</li>
</ul>
<div class="highlight"><pre><span></span><code>*******************************************
Use<span class="w"> </span>this<span class="w"> </span>code<span class="w"> </span>to<span class="w"> </span>create<span class="w"> </span>your<span class="w"> </span>admin<span class="w"> </span>account:
c6c35779-af3a-4091-b330-c026610920d6
*******************************************
</code></pre></div>

<ul>
<li>Lancez docker-compose en arrière-plan avec : <code>docker-compose up -d</code></li>
<li>L'application devrait fonctionner sur votre nom de domaine. Quand vous chargez le nom de domaine, vous devriez arriver sur une page de configuration pour confirmer les paramètres de votre instance et un formulaire pour créer un compte admin. Utilisez votre code admin pour vous enregistrer.</li>
</ul>
<p>Bravo ! Vous avez réussi !! Configurez votre instance comme vous le souhaitez.</p>
<h2 id="sauvegardes"><a class="headerlink" href="#sauvegardes">Sauvegardes</a></h2>
<p>Le service db de BookWyrm créer une copie de sauvegarde de sa base de données dans le dossier <code>/backups</code> chaque jour à minuit UTC. Les sauvegardes sont nommées <code>backup__%Y-%m-%d.sql</code>.</p>
<p>Le service db possède un script optionnel pour nettoyer périodiquement le dossier des sauvegardes afin que les sauvegardes récentes soient conservées ainsi que les sauvegardes mensuelles et hebdomadaires. Pour activer ce script :</p>
<ul>
<li>Décommentez la dernière ligne dans <code>postgres-docker/cronfile</code></li>
<li>Reconstruisez votre instance <code>docker-compose up --build</code></li>
</ul>
<p>Vous pouvez copier les sauvegardes depuis le volume de sauvegardes vers votre machine avec <code>docker cp</code> :</p>
<ul>
<li>Lancez <code>docker-compose ps</code> pour vérifier le nom du service db (probablement <code>bookwyrm_db_1</code>).</li>
<li>Lancez <code>docker cp &lt;container_name&gt;:/backups &lt;host machine path&gt;</code></li>
</ul>
<h2 id="conflits-de-port"><a class="headerlink" href="#conflits-de-port">Conflits de port</a></h2>
<p>BookWyrm a plusieurs services fonctionnant sur leurs ports par défaut. Cela veut dire que, en fonction de ce qui fonctionne sur votre machine, vous pouvez rencontrer des erreurs à la construction et au lancement de BookWyrm lorsque les tentatives d'utiliser ces ports échouent.</p>
<p>Si cela arrive, vous devrez changer votre configuration pour lancer ces services sur des ports différents. Cela peut demander des modifications dans les fichiers suivants :</p>
<ul>
<li><code>docker-compose.yml</code></li>
<li><code>nginx/production.conf</code> or <code>nginx/reverse_proxy.conf</code> depending on NGINX_SETUP in .env-file</li>
<li><code>.env</code> (Vous créer ce fichier vous-même durant la configuration)</li>
</ul>
<p>Si vous avez déjà un serveur web sur cette machine, vous devrez configurer un proxy inverse.</p>
<h2 id="restez-a-laffut"><a class="headerlink" href="#restez-a-laffut">Restez à l'affût</a></h2>
<p>BookWyrm étant un projet jeune, nous travaillons toujours pour planifier une version stable et il y a beaucoup de bogues et de changements cassants. Il y a une équipe GitHub qui peut être mentionnée quand quelque chose d'important à propos d'une mise à jour se passe et que vous pouvez rejoindre en partageant votre nom d'utilisateur·ice GitHub. Il y a plusieurs manières d'entrer en contact :</p>
<ul>
<li>Open an issue or pull request to add your instance to the <a href="https://joinbookwyrm.com/instances/">official list</a></li>
<li>Contacter le projet sur <a href="https://tech.lgbt/@bookwyrm">Mastodon</a> ou <a href="mailto:mousereeve@riseup.net">envoyer un mail au mainteneur·ice</a> directement avec votre nom d'utilisateur·ice GitHub</li>
<li>Rejoindre le salon de discussion <a href="https://matrix.to/#/#bookwyrm:matrix.org">Matrix</a></li>
</ul>
</section>

            </section>
        </div>
    </div>
</div>

<footer id="contentinfo" class="footer">
    <div class="container is-max-desktop">
        <div class="columns">
            <div class="column content">
                <p>
                    <strong>BookWyrm</strong> est un logiciel collaboratif et anti-commercial maintenu par <a href='https://www.mousereeve.com/'>Mouse Reeve</a>.
                </p>
                <p>
                    Soutenir BookWyrm sur <a href='https://www.patreon.com/bookwyrm' target='_blank'>Patreon</a>.
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">Contribuer</h3>
                <p>
                    <a href="https://github.com/bookwyrm-social">BookWyrm sur GitHub</a>
                </p>
                <p>
                    <a href="https://github.com/bookwyrm-social/documentation/blob/main/content/running_bookwyrm/install-prod.md">Contribuer à cette page</a>
                </p>
                <p>
                    <a href="https://twitter.com/BookWyrmSocial" target="_blank">
                        <span class="icon icon-twitter"><span class="is-sr-only">Twitter</span></span>
                    </a>
                    <a href="https://tech.lgbt/@bookwyrm" target="_blank" rel="me">
                        <span class="icon icon-mastodon"><span class="is-sr-only">Mastodon</span></span>
                    </a>
                    <a href="https://www.patreon.com/bookwyrm" target="_blank">
                        <span class="icon icon-patreon"><span class="is-sr-only">Patreon</span></span>
                    </a>
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">En savoir plus</h3>
                <p>
                    <a href="https://docs.joinbookwyrm.com">Documentation</a>
                </p>
                <p>
                    <a href="mailto:mousereeve@riseup.net">Contact</a>
                </p>
                <p>
                    <a href="https://raw.githubusercontent.com/bookwyrm-social/join-bookwyrm/main/LICENSE.md">Licence</a>
                </p>
            </div>
        </div>
    </div>
</footer>

<script>
    var current_locale = "fr/";
    var current_version = "v0.7.5";
</script>
<script src="/static/js/bookwyrm.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
    <title>
        
Mise à jour de votre instance

    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/static/css/icons.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bulma.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bookwyrm.css?v076">

    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bookwyrm Documentation">
    <meta name="og:title" content="Bookwyrm Documentation">
    <meta name="twitter:description" content="Documentation for using and contributing to BookWyrm">
    <meta name="og:description" content="Documentation for using and contributing to BookWyrm">

    <meta name="twitter:image" content="">
    <meta name="og:image" content="">
    <meta name="twitter:image:alt" content="BookWyrm Logo">

    <meta charset="UTF-8">
</head>
<body>
<nav class="navbar container is-max-desktop" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://joinbookwyrm.com/">
            <img class="image logo" src="/static/images/logo-small.png" alt="Go back to the homepage">
        </a>
        <a href="/" class="navbar-item has-text-link has-text-weight-bold">
            Documentation
        </a>
        <a role="button" class="navbar-burger" data-target="main-nav" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
    </div>

    <div class="navbar-menu" id="main-nav">
        <div class="navbar-start">
            <a href="https://joinbookwyrm.com/fr/instances" class="navbar-item">
                Rejoindre
            </a>
            <a href="https://joinbookwyrm.com/fr/get-involved" class="navbar-item">
                S'impliquer dans le projet
            </a>
            <a href="https://www.patreon.com/bookwyrm" class="navbar-item">
                Soutenir
            </a>
            <a href="https://github.com/bookwyrm-social/bookwyrm" class="navbar-item">
                Code
            </a>
        </div>
    </div>
</nav>

<div class="columns">
    <nav class="menu column is-one-quarter is-hidden-touch pl-6 mt-4" id="menu">
        <h2 class="menu-label">Language & Version</a></h2>
        <div class="select">
            <select aria-label="Select a language" id="language_selection">
                
                <option value="" >English (US)</option>
                
                <option value="de/" >Deutsch</option>
                
                <option value="fr/" selected>Français</option>
                
                <option value="pl/" >Polski</option>
                
                <option value="pt-br/" >Português do Brasil</option>
                
                <option value="ro/" >Română</option>
                
          </select>
        </div>
        <div class="select">
            <select aria-label="Previous versions" id="version_selection">
                
                <option value="latest" >latest</option>
                
                <option value="v0.7.5" >v0.7.5</option>
                
            </select>
        </div>
        
        <h2 class="menu-label">Using BookWyrm</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/fr/posting-statuses.html" class="has-background-inherit" >Posting Statuses</a>
            </li>
            
            <li>
                <a href="/fr/privacy-controls.html" class="has-background-inherit" >Privacy Controls</a>
            </li>
            
            <li>
                <a href="/fr/adding-books.html" class="has-background-inherit" >Ajout de livres</a>
            </li>
            
            <li>
                <a href="/fr/lists.html" class="has-background-inherit" >Lists</a>
            </li>
            
            <li>
                <a href="/fr/groups.html" class="has-background-inherit" >Groups</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Running BookWyrm</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/fr/reverse-proxy.html" class="has-background-inherit" ></a>
            </li>
            
            <li>
                <a href="/fr/moderation.html" class="has-background-inherit" >Modération</a>
            </li>
            
            <li>
                <a href="/fr/install-prod.html" class="has-background-inherit" >Installation en Production</a>
            </li>
            
            <li>
                <a href="/fr/install-prod-dockerless.html" class="has-background-inherit" >Installation sans Docker</a>
            </li>
            
            <li>
                <a href="/fr/updating.html" class="has-background-inherit" class="is-active">Mise à jour de votre instance</a>
            </li>
            
            <li>
                <a href="/fr/monitoring-queue.html" class="has-background-inherit" >Suivi de la file d'attente</a>
            </li>
            
            <li>
                <a href="/fr/external-storage.html" class="has-background-inherit" >Stockage Externe</a>
            </li>
            
            <li>
                <a href="/fr/optional_features.html" class="has-background-inherit" >Fonctionnalités optionnelles</a>
            </li>
            
            <li>
                <a href="/fr/cli.html" class="has-background-inherit" >Outils en ligne de commande</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Contributing</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/fr/contributing.html" class="has-background-inherit" >Comment contribuer</a>
            </li>
            
            <li>
                <a href="/fr/translation.html" class="has-background-inherit" >Translations</a>
            </li>
            
            <li>
                <a href="/fr/style_guide.html" class="has-background-inherit" >Style Guide</a>
            </li>
            
            <li>
                <a href="/fr/install-dev.html" class="has-background-inherit" >Developer Environment</a>
            </li>
            
            <li>
                <a href="/fr/debug_toolbar.html" class="has-background-inherit" >Django Debug Toolbar</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Codebase</h2>
        <ul class="menu-list has-background-inherit">
            
            <li>
                <a href="/fr/activitypub.html" class="has-background-inherit" >ActivityPub</a>
            </li>
            
            <li>
                <a href="/fr/permissions.html" class="has-background-inherit" >Permissions</a>
            </li>
            
        </ul>
        
        <h2 class="menu-label">Reference Guides</h2>
        <ul class="menu-list has-background-inherit">
            
        </ul>
        
    </nav>

    <div class="column">
        <div class="container is-max-desktop">
            <section class="section">
                <header class="content block column is-offset-one-quarter pl-2">
                    
<h1 class="title is-1">Mise à jour de votre instance</h1>

                </header>
                
<section class="block content">
    <p>Quand des changements sont disponibles sur la branche de production, il est possible de les installer et les faire fonctionner sur l'instance en utilisant la commande <code>./bw-dev update</code>. Cela fait plusieurs choses :</p>
<ul>
<li><code>git pull</code> récupère le code à jour depuis le dépôt git. S'il y a des conflits, vous pourriez avoir besoin de lancer <code>git pull</code> indépendamment et résoudre les conflits avant d'essayer le script <code>./bw-dev update</code> à nouveau.</li>
<li><code>docker-compose build</code> reconstruit les images, ce qui permet de s'assurer que les bons paquets sont installés. Cette étape prend beaucoup de temps et est nécessaire uniquement lorsque les dépendances (incluant les paquets pip <code>requirements.txt</code>) ont changées, il est donc possible de la commenter si on souhaite une mise à jour plus rapide et ne pas être gêné de la décommenter si nécessaire.</li>
<li><code>docker-compose run --rm web python manage.py migrate</code> exécute les migrations de base de données dans Django en utilisant les images Docker nouvellement créées</li>
<li><code>docker-compose run --rm web python manage.py collectstatic --no-input</code> charge tous les fichiers statiques mis à jour (comme les fichiers JavaScript et CSS)</li>
<li><code>docker-compose down; docker-compose up -d</code> redémarrera tous les conteneurs docker et utilisera les images nouvellement construites (attention : l'instance sera inaccessible pendant son redémarrage)</li>
</ul>
<h2 id="reconstruire-les-flux-dactivite"><a class="headerlink" href="#reconstruire-les-flux-dactivite">Reconstruire les flux d'activité</a></h2>
<p>Les flux de chaque utilisateur·ice sont stockés dans Redis. Pour repeupler un flux, il faut utiliser la commande de gestion :</p>
<div class="highlight"><pre><span></span><code>./bw-dev<span class="w"> </span>populate_streams
<span class="c1"># Ou en utilisant directement docker-compose</span>
docker-compose<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>web<span class="w"> </span>python<span class="w"> </span>manage.py<span class="w"> </span>populate_streams
</code></pre></div>

<p>Si quelque chose s'est terriblement mal passé, le flux de donnée peut être supprimé.</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>web<span class="w"> </span>python<span class="w"> </span>manage.py<span class="w"> </span>erase_streams
</code></pre></div>
</section>

            </section>
        </div>
    </div>
</div>

<footer id="contentinfo" class="footer">
    <div class="container is-max-desktop">
        <div class="columns">
            <div class="column content">
                <p>
                    <strong>BookWyrm</strong> est un logiciel collaboratif et anti-commercial maintenu par <a href='https://www.mousereeve.com/'>Mouse Reeve</a>.
                </p>
                <p>
                    Soutenir BookWyrm sur <a href='https://www.patreon.com/bookwyrm' target='_blank'>Patreon</a>.
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">Contribuer</h3>
                <p>
                    <a href="https://github.com/bookwyrm-social">BookWyrm sur GitHub</a>
                </p>
                <p>
                    <a href="https://github.com/bookwyrm-social/documentation/blob/main/content/running_bookwyrm/updating.md">Contribuer à cette page</a>
                </p>
                <p>
                    <a href="https://twitter.com/BookWyrmSocial" target="_blank">
                        <span class="icon icon-twitter"><span class="is-sr-only">Twitter</span></span>
                    </a>
                    <a href="https://tech.lgbt/@bookwyrm" target="_blank" rel="me">
                        <span class="icon icon-mastodon"><span class="is-sr-only">Mastodon</span></span>
                    </a>
                    <a href="https://www.patreon.com/bookwyrm" target="_blank">
                        <span class="icon icon-patreon"><span class="is-sr-only">Patreon</span></span>
                    </a>
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">En savoir plus</h3>
                <p>
                    <a href="https://docs.joinbookwyrm.com">Documentation</a>
                </p>
                <p>
                    <a href="mailto:mousereeve@riseup.net">Contact</a>
                </p>
                <p>
                    <a href="https://raw.githubusercontent.com/bookwyrm-social/join-bookwyrm/main/LICENSE.md">Licence</a>
                </p>
            </div>
        </div>
    </div>
</footer>

<script>
    var current_locale = "fr/";
</script>
<script src="/static/js/bookwyrm.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="ro">
<head>
    <title>
        
Command Line Tool

    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link type="text/css" rel="stylesheet" href="/static/css/icons.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bulma.min.css">
    <link type="text/css" rel="stylesheet" href="/static/css/bookwyrm.css">

    <link rel="shortcut icon" type="image/x-icon" href="/static/images/favicon.ico">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Bookwyrm Documentation">
    <meta name="og:title" content="Bookwyrm Documentation">
    <meta name="twitter:description" content="Documentation for using and contributing to BookWyrm">
    <meta name="og:description" content="Documentation for using and contributing to BookWyrm">

    <meta name="twitter:image" content="">
    <meta name="og:image" content="">
    <meta name="twitter:image:alt" content="BookWyrm Logo">

    <meta charset="UTF-8">
</head>
<body>
<nav class="navbar container is-max-desktop" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://joinbookwyrm.com/">
            <img class="image logo" src="/static/images/logo-small.png" alt="Go back to the homepage">
        </a>
    </div>

    <div class="navbar-menu" id="main-nav">
        <div class="navbar-start">
            <a href="https://joinbookwyrm.com/ro/instances" class="navbar-item">
                <span class="button is-success has-text-weight-normal has-text-white">Alăturați-vă</span>
            </a>
            <a href="https://joinbookwyrm.com/ro/get-involved" class="navbar-item">
                Implicați-vă
            </a>
            <a href="https://www.patreon.com/bookwyrm" class="navbar-item">
                Susțineți
            </a>
            <a href="https://github.com/bookwyrm-social/bookwyrm" class="navbar-item">
                Cod
            </a>
            <a href="#" class="navbar-item is-active">
                Documentație
            </a>
        </div>
    </div>
    <div class="navbar-end">
        <div class="navbar-item">
            <div class="select">
                <select aria-label="Select a language" id="language_selection">
                    
                    <option value="" >English (US)</option>
                    
                    <option value="de/" >Deutsch</option>
                    
                    <option value="fr/" >Français</option>
                    
                    <option value="pl/" >Polski</option>
                    
                    <option value="pt-br/" >Português do Brasil</option>
                    
                    <option value="ro/" selected>Română</option>
                    
              </select>
            </div>
        </div>
    </div>
</nav>

<div class="container is-max-desktop">
<section class="section">

    <header class="content block column is-offset-one-quarter pl-2">
        
<h1 class="title is-1">Command Line Tool</h1>

    </header>
    <div class="columns">
	<nav class="menu column is-one-quarter mt-2">
        <div class="select">
            <select aria-label="Previous versions" id="version_selection">
                
                <option value="latest" >latest</option>
                
                <option value="v0.7.5" selected>v0.7.5</option>
                
            </select>
        </div>
            <h2 class="menu-label"><a href="/ro/">Welcome</a></h2>
            
            <h2 class="menu-label">Using BookWyrm</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/v0.7.5/ro/posting-statuses.html" >Posting Statuses</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/privacy-controls.html" >Privacy Controls</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/adding-books.html" >Adding Books</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/groups.html" >Groups</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Running BookWyrm</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/v0.7.5/ro/install-prod.html" >Installing in Production</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/install-prod-dockerless.html" >Installing Without Docker</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/updating.html" >Updating Your Instance</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/reverse-proxy.html" >Using a Reverse-Proxy</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/moderation.html" >Moderation</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/monitoring-queue.html" >Monitoring Queue</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/external-storage.html" >External Storage</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/optional_features.html" >Optional features</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/cli.html" class="is-active">Command Line Tool</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Contributing</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/v0.7.5/ro/contributing.html" >How to Contribute</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/translation.html" >Translations</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/style_guide.html" >Style Guide</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/install-dev.html" >Developer Environment</a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/debug_toolbar.html" >Django Debug Toolbar</a>
                </li>
                
            </ul>
            
            <h2 class="menu-label">Codebase</h2>
            <ul class="menu-list">
                
                <li>
                    <a href="/v0.7.5/ro/permissions.html" ></a>
                </li>
                
                <li>
                    <a href="/v0.7.5/ro/activitypub.html" >ActivitatePub</a>
                </li>
                
            </ul>
            
        </nav>

        <div class="column">
            
<section class="block content">
    <p>Dezvoltatorii BookWyrm și managerii de instanțe pot folosi scriptul <code>bw-dev</code> pentru sarcinile comune. Poate face comenzile dvs. mai scurte, mai ușor de reținut și mai greu de confundat.</p>
<p>Odată ce ați instalat BookWyrm <a href="installing-in-production.html">în producție</a> sau <a href="https://docs.joinbookwyrm.com/developer-environment.html#setting_up_the_developer_environment">în dezvoltare</a>, puteți rula scriptul din linia de comandă cu <code>./bw-dev</code> urmat de o subcomandă pe care doriți să o rulați.</p>
<h2 id="scurtaturi-docker"><a class="headerlink" href="#scurtaturi-docker">Scurtături Docker</a></h2>
<h3 id="bash"><a class="headerlink" href="#bash">bash</a></h3>
<p>Deschide o sesiune interactivă de <code>bash</code> în interiorul containerului docker <code>web</code>.</p>
<h3 id="build"><a class="headerlink" href="#build">build</a></h3>
<p>Echivalent cu <code>docker-compose build</code>.</p>
<h3 id="dbshell"><a class="headerlink" href="#dbshell">dbshell</a></h3>
<p>Deschide un shell interactiv pentru baza de date Postgres. Sper că știți ceea ce faceți.</p>
<h3 id="runweb-args"><a class="headerlink" href="#runweb-args">runweb args</a></h3>
<p>Rulează o comandă arbitrară (reprezentată deasupra de <code>args</code>) în containerul <code>web</code>.</p>
<p>Echivalent cu <code>docker-compose run --rm web</code>.</p>
<h3 id="service_ports_web-args"><a class="headerlink" href="#service_ports_web-args">service_ports_web args</a></h3>
<p>Rulează o comandă arbitrară în containerul <code>web</code> (reprezentată deasupra de <code>args</code>) cu porturile expuse. Aceasta este utilă dacă vreți să rulați teste <code>pdb</code> deoarece <code>runweb</code> nu expune promptul <code>pdb</code>.</p>
<p>Echivalent cu <code>docker-compose run --rm --service-ports web</code>.</p>
<h3 id="shell"><a class="headerlink" href="#shell">shell</a></h3>
<p>Deschide un shell interactiv Django în interiorul containerului docker <code>web</code>. O veți folosi dacă vreți să rulați comenzi de shell Django direct.</p>
<h3 id="up-args"><a class="headerlink" href="#up-args">up [args]</a></h3>
<p>Pornește sau repornește containerele Dcoker, opțional incluzând orice argument(reprezentat mai sus de <code>args</code>). Echivalent cu <code>docker-compose up --build [args]</code></p>
<h2 id="gestionarea-bazei-de-date"><a class="headerlink" href="#gestionarea-bazei-de-date">Gestionarea bazei de date</a></h2>
<h3 id="initdb"><a class="headerlink" href="#initdb">initdb</a></h3>
<p>Inițializează o bază de date.</p>
<h3 id="makemigrations-appname-migration-number"><a class="headerlink" href="#makemigrations-appname-migration-number">makemigrations [appname migration number]</a></h3>
<p><em>Această comandă nu este disponibilă în ramura de <code>producție</code></em>.</p>
<p>Rulează comanda Django <code>makemigrations</code> în interiorul containerului dvs. Docker. Dacă ați schimbat structura bazei de date în ramura de dezvoltare veți avea nevoie să o rulați pentru ca schimbările dvs. să aibă efect. Opțional, puteți specifica o migrație specifică pe care să o rulați, de ex. <code>./bw-dev makemigrations bookwyrm 0108</code></p>
<h3 id="migrate"><a class="headerlink" href="#migrate">migrate</a></h3>
<p>Rulează comanda Django <code>migrate</code> în interiorul containerului dvs. Docker. Veți avea nevoie mereu de a o rula după <code>makemigrations</code>.</p>
<h3 id="resetdb"><a class="headerlink" href="#resetdb">resetdb</a></h3>
<p><em>Această comandă nu este disponibilă în ramura de <code>producție</code></em>.</p>
<p>Resetează baza de date. <strong>Această comandă va șterge întreaga bază de date BookWyrm</strong>, iar apoi va iniția o bază de date nouă și rula toate migrațiile. Va trebui să ștergeți orice fișier de migrație recent pe care nu vreți să-l rulați <em>înainte</em> de a rula <code>resetdb</code>.</p>
<h2 id="gestionarea-unei-instante-bookwyrm"><a class="headerlink" href="#gestionarea-unei-instante-bookwyrm">Gestionarea unei instanțe BookWyrm</a></h2>
<h3 id="compile_themes"><a class="headerlink" href="#compile_themes">compile_themes</a></h3>
<p>Compiles all BookWyrm themes, which are <code>*.scss</code> files listed in <code>bookwyrm/static/css/themes</code>.</p>
<h3 id="collectstatic"><a class="headerlink" href="#collectstatic">collectstatic</a></h3>
<p>Migrate static assets to either a Docker container or to an S3-compatible "bucket", depending on the context.</p>
<h3 id="generate_preview_images"><a class="headerlink" href="#generate_preview_images">generate_preview_images</a></h3>
<p>Generate preview images for site, users, and books. This can take a while if you have a large database. See <a href="/optional_features.html">Optional Features: Generating preview images</a></p>
<h3 id="remove_remote_user_preview_images"><a class="headerlink" href="#remove_remote_user_preview_images">remove_remote_user_preview_images</a></h3>
<p>Remove generated preview images for remote users. See <a href="/optional_features.html">Optional Features: Removing preview images for remote users</a></p>
<h3 id="generate_thumbnails"><a class="headerlink" href="#generate_thumbnails">generate_thumbnails</a></h3>
<p>Generates thumbnail images for book covers.</p>
<h3 id="populate_streams-args"><a class="headerlink" href="#populate_streams-args">populate_streams args</a></h3>
<p>Re-populates Redis streams (user feeds). You will not usually need to run this unless there is an error that wipes out your user feeds for some reason. You can specify which stream using the <code>--stream</code> argument.</p>
<h3 id="populate_list_streams"><a class="headerlink" href="#populate_list_streams">populate_list_streams</a></h3>
<p>Re-populates Redis cache of lists. You will not usually need to run this unless there is an error that wipes out your users' lists for some reason.</p>
<h3 id="populate_suggestions"><a class="headerlink" href="#populate_suggestions">populate_suggestions</a></h3>
<p>Populate suggested users for all users. You may want to run this manually to refresh suggestions.</p>
<h3 id="restart_celery"><a class="headerlink" href="#restart_celery">restart_celery</a></h3>
<p>Restarts the <code>celery_worker</code> Docker container.</p>
<h3 id="update"><a class="headerlink" href="#update">update</a></h3>
<p>When there are changes to the <code>production</code> branch, you can update your instance without downtime.</p>
<p>This command <code>git pull</code>s the latest <code>production</code> branch updates, builds docker images if necessary, runs Django migrations, updates static files, and restarts all Docker containers.</p>
<h3 id="admin_code"><a class="headerlink" href="#admin_code">admin_code</a></h3>
<p>Gets the secret admin code used to register the inital admin user on a new BookWyrm instance.</p>
<h2 id="configurati-stocare-s3-compatibila"><a class="headerlink" href="#configurati-stocare-s3-compatibila">Configurați stocare S3 compatibilă</a></h2>
<p>By default, BookWyrm uses local storage for static assets (favicon, default avatar, etc.), and media (user avatars, book covers, etc.), but you can use an external storage service to serve these files. BookWyrm uses django-storages to handle external storage, such as S3-compatible services, Apache Libcloud or SFTP.</p>
<p>See <a href="/external-storage.html">External Storage</a> for more information.</p>
<h3 id="copy_media_to_s3"><a class="headerlink" href="#copy_media_to_s3">copy_media_to_s3</a></h3>
<p>Migrate all uploaded media from an existing BookWyrm installation to an S3-compatible "bucket". Use for initial upload to an empty bucket.</p>
<h3 id="sync_media_to_s3"><a class="headerlink" href="#sync_media_to_s3">sync_media_to_s3</a></h3>
<p>Sync new or changed uploaded media from an existing BookWyrm installation to an S3-compatible "bucket". Use to ensure all local files are uploaded to an existing bucket.</p>
<h3 id="set_cors_to_s3-filename"><a class="headerlink" href="#set_cors_to_s3-filename">set_cors_to_s3 filename</a></h3>
<p>Copy a CORS rules JSON file to your S3 bucket, where <code>filename</code> is the name of your JSON file (e.g. <code>./bw-dev set_cors_to_s3 cors.json</code>)</p>
<h2 id="dezvoltare-si-testare"><a class="headerlink" href="#dezvoltare-si-testare">Dezvoltare și testare</a></h2>
<p><em>These commands are not available on the <code>production</code> branch</em>.</p>
<h3 id="black"><a class="headerlink" href="#black">black</a></h3>
<p>BookWyrm uses the <a href="https://github.com/psf/black">Black</a> code formatter to keep the Python codebase consistent styled. Run <code>black</code> before committing your changes so the <code>pylint</code> task does not fail for your pull request and make you sad.</p>
<h3 id="prettier"><a class="headerlink" href="#prettier">prettier</a></h3>
<p>BookWyrm uses <a href="https://prettier.io/">Prettier</a> to keep the JavaScript codebase consistently styled. Run <code>prettier</code> before committing changes to scripts to automatically format your code.</p>
<h3 id="stylelint"><a class="headerlink" href="#stylelint">stylelint</a></h3>
<p>BookWyrm uses <a href="uhttps://stylelint.io/">Stylelint</a> to keep the CSS files consistently styled. Run <code>stylelintprettier</code> before committing changes to scripts to automatically format your code.</p>
<h3 id="formatters"><a class="headerlink" href="#formatters">formatters</a></h3>
<p>This command runs all code formatters (<code>black</code>, <code>prettier</code>, and <code>stylelint</code>) in one go.</p>
<h3 id="clean"><a class="headerlink" href="#clean">clean</a></h3>
<p>Remove all stopped Docker containers.</p>
<p>Equivalent to:</p>
<div class="highlight"><pre><span></span><code>docker-compose<span class="w"> </span>stop
docker-compose<span class="w"> </span>rm<span class="w"> </span>-f
</code></pre></div>

<h3 id="makemessages"><a class="headerlink" href="#makemessages">makemessages</a></h3>
<p>Creates message files for all translation strings. After you have run <code>makemessages</code> you need to run <code>compilemessages</code> to compile the translations. See <a href="https://docs.djangoproject.com/en/3.2/ref/django-admin/#makemessages">Django's makemessages</a>.</p>
<h3 id="compilemessages"><a class="headerlink" href="#compilemessages">compilemessages</a></h3>
<p>Compiles translation files. See <a href="https://docs.djangoproject.com/en/3.2/ref/django-admin/#compilemessages">Django's compilemessages</a>.</p>
<h3 id="pytest-args"><a class="headerlink" href="#pytest-args">pytest args</a></h3>
<p>Run tests with <code>pytest</code>.</p>
<h3 id="deactivate_2fa"><a class="headerlink" href="#deactivate_2fa">deactivate_2fa</a></h3>
<p>Deactivates two factor authentication for a given user.</p>
<h3 id="manual_confirm"><a class="headerlink" href="#manual_confirm">manual_confirm</a></h3>
<p>Confirms a users email, sets the user to active.</p>
</section>

        </div>
    </div>
</section>
</div>

<footer id="contentinfo" class="footer">
    <div class="container is-max-desktop">
        <div class="columns">
            <div class="column content">
                <p>
                    <strong>BookWyrm</strong> este un program colaborativ, anti-corporație, menținut de <a href='https://www.mousereeve.com/'>Mouse Reeve</a>.
                </p>
                <p>
                    Susțineți BookWyrm pe <a href='https://www.patreon.com/bookwyrm' target='_blank'>Patreon</a>.
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">Alăturați-vă</h3>
                <p>
                    <a href="https://github.com/bookwyrm-social">BookWyrm pe GitHub</a>
                </p>
                <p>
                    <a href="https://github.com/bookwyrm-social/documentation/blob/main/content/running_bookwyrm/cli.md">Contribuiți la această pagină</a>
                </p>
                <p>
                    <a href="https://twitter.com/BookWyrmSocial" target="_blank">
                        <span class="icon icon-twitter"><span class="is-sr-only">Twitter</span></span>
                    </a>
                    <a href="https://tech.lgbt/@bookwyrm" target="_blank" rel="me">
                        <span class="icon icon-mastodon"><span class="is-sr-only">Mastodon</span></span>
                    </a>
                    <a href="https://www.patreon.com/bookwyrm" target="_blank">
                        <span class="icon icon-patreon"><span class="is-sr-only">Patreon</span></span>
                    </a>
                </p>
            </div>
            <div class="column">
                <h3 class="title is-6">Aflați mai multe</h3>
                <p>
                    <a href="https://docs.joinbookwyrm.com">Documentație</a>
                </p>
                <p>
                    <a href="mailto:mousereeve@riseup.net">Contactați responsabilul</a>
                </p>
                <p>
                    <a href="https://raw.githubusercontent.com/bookwyrm-social/join-bookwyrm/main/LICENSE.md">Licență</a>
                </p>
            </div>
        </div>
    </div>
</footer>

<script type="text/javascript">
    (function() {
        var languageSelector = document.getElementById("language_selection");
        languageSelector.onchange = function(event) {
            var current_locale = "ro/";
            var current_location = window.location.pathname;

            var locale_index = current_location.indexOf(current_locale);
            var new_location = "/" + event.target.value;

            if (locale_index) {
                // we're in a locale - swap it out
                new_location = current_location.replace(current_locale, event.target.value)
            } else {
                // are we in a version?
                var regx = /\/v[0-9\.]+/
                if (regx.test(current_location)) {
                    // split current location
                    arr = current_location.split("/")
                    // insert new locale
                    arr.splice(2, 0, event.target.value.replace("/", ""))
                    // gather it all together again
                    new_location = arr.join("/")
                } else {
                    new_location += current_location.slice(1);
                }
            }
            window.location = new_location;
        }
    })()
</script>
<script type="text/javascript">
    (function() {
        var versionSelector = document.getElementById("version_selection");
        versionSelector.onchange = function(event) {
            current_version = "v0.7.5"
            var current_location = window.location.pathname;
            var target_version = event.target.value == "latest" ? "" : event.target.value;
            var arr = current_location.split("/")
            var regx = /\/v[0-9\.]+/
            if (regx.test(current_location)) {
                window.location = window.location.href.replace(regx,`${target_version}`)
            } else {
                window.location = `/${target_version}${current_location}`
            }
        }
    })()
</script>


</body>
</html>